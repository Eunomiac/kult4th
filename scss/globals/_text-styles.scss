* {
	// @include set-default-theme();
}

&,
.mce-content-body {

	&,
	*,
	input[type="text"],
	input[type="number"],
	textarea,
	select,
	option,
	img,
	ul,
	li {
		color: var(--KT-color-primary);

		font: {
			family: var(--font-primary);
			weight: $font-weight-normal;
		}
		font-feature-settings: "ss05", "lnum";
		border: none;

		option { background: var(--KT-color-contrast) }

		hyphens: auto;

		&.kult-text-container {
			text-align: justify;
		}
	}

	textarea,
	input[type='text'],
	select,
	.content-editable {
		height: unset;
		margin: 0 4px;
		box-sizing: content-box;

		outline: none;
		box-shadow: none;

		overflow: hidden;

		&:invalid {
			color: $red-dark;
		}

		&.placeholder {
			color: #666666 !important;
			font-weight: $font-weight-light !important;
			font-family: var(--font-primary) !important;
			font-style: italic !important;
			text-shadow: none !important;
			text-transform: none !important;
			font-variant: normal !important;
		}
	}

	i {
		--KT-color-primary: #{$gold};
		--KT-color-contrast: #{$black};
		font-family: var(--font-icon);
		font-weight: $font-weight-black;

		&.notification-pip { --KT-color-primary: #{$gold-glow} }
	}

	.header-button.close i { --KT-color-primary: #{$red-glow} }

	ul.rules-list, ul.inline-list {
		--list-indent: 24px;
		margin: 0px 0px 0px var(--list-indent);
		padding: 0;

		li {
			text-align: left;
			list-style: none;
			text-indent: calc(-1 * var(--list-indent));
		}

		li:before {
			content: "";
			display: inline-block;
			height: 18px;
			width: var(--list-indent);
			background: var(--KT-bullet);
			vertical-align: bottom;
			background-size: 50%;
		}
	}

	label.k4-title,
	h1,
	h2,
	h3,
	label.k4-h4,
	label.k4-header {
		display: block;
		width: 100%;
		border: none;
		white-space: normal;

		&.tight {
			margin-top: 0;
			margin-bottom: 0;
		}

		&:first-child {
			margin-top: 0;
		}
		&:last-child {
			margin-bottom: 0;
		}
	}

	label.k4-title {
		color: var(--KT-color-title);
		background: var(--KT-color-title-contrast);
		font-weight: $font-weight-semi;
		font-size: $rem-22;
		line-height: $rem-24;
		height: $rem-24;
		white-space: nowrap;
		text-align: center;

		&.section-title {
			width: calc(100% + var(--subsection-padding-left) + var(--subsection-padding-right));
			text-transform: uppercase;
			font-weight: $font-weight-bold;
			font-family: var(--font-primary-caps);
			margin:
				calc(-1 * (var(--subsection-padding-top)))
				0
				var(--subsection-padding-top)
				calc(-1 * var(--subsection-padding-left));
			padding-top: 1px;
		}

		&.item-title {
			text-align: left;
			margin: 0 0 0 22px;
			line-height: $rem-32;
			font-weight: $font-weight-bold;
			padding: 5px 10px 0px 20px;
		}
	}

	h1 {
		color: var(--KT-color-secondary);
		font-family: var(--font-heading);
		font-size: $rem-32;
		font-weight: $font-weight-semi;
		height: $rem-32;
		margin: 20px 0 10px;
	}

	h2 {
		color: var(--KT-color-secondary);
		font-family: var(--font-primary);
		font-size: $rem-24;
		font-weight: $font-weight-bold;
		height: $rem-24;
		margin: 10px 0;
	}

	h3 {
		color: var(--KT-color-secondary);
		font-family: var(--font-primary);
		font-size: $rem-16;
		font-weight: $font-weight-bold;
		font-variant: all-small-caps;
		// height: $rem-16;
		margin: 10px 0 0 0;
	}

	label.k4-h4 {
		color: var(--KT-color-secondary);
		font-family: var(--font-primary);
		font-size: $rem-12;
		font-weight: $font-weight-bold;
		font-style: italic;
		height: $rem-12;
		margin: 5px 0 -5px;
	}

	label.k4-header {
		font-size: $rem-24;
		font-weight: $font-weight-bold;
		text-align: center;

		font-variant: all-small-caps;
		// margin-bottom: 5px;
		// padding: 5px 0 4px 0;

		&.hold-header {
			color: $white;
			background: $red-dark;

			animation: neonGlowRed 1.5s infinite alternate cubic-bezier(0.455, 0.030, 0.515, 0.955);

			@keyframes neonGlowRed {
				0% {
					text-shadow: 0 0 2px rgba(255, 255, 255, 0.8),
											0 0 4px rgba(255, 255, 255, 0.8),
											0 0 4.5px  rgba(255, 255, 255, 0.8),
											0 0 8px  rgba(220, 65, 65, 0.8),
											0 0 12.5px  rgba(220, 65, 65, 0.8),
											0 0 16.5px  rgba(220, 65, 65, 0.5),
											0 0 21px rgba(220, 65, 65, 0.5),
											0 0 29px rgba(220, 65, 65, 0.5),
											0 0 41.5px rgba(220, 65, 65, 0.5);
				}
				100% {
					text-shadow: 0 0 0.5px rgba(255,255,255,.8),
											0 0 1.5px rgba(255,255,255,.8),
											0 0 2px rgba(255,255,255,.8),
											0 0 4px rgba(220, 65, 65, 0.8),
											0 0 6px rgba(220, 65, 65, 0.8),
											0 0 8px rgba(220, 65, 65, 0.8),
											0 0 10.5px rgba(220, 65, 65, 0.8),
											0 0 16.5px rgba(220, 65, 65, 0.8);
				}
			}
		}

		&.edges-header {
			color: $white;
			background: $blue-dark;

			animation: neonGlowBlue 1.5s infinite alternate cubic-bezier(0.455, 0.030, 0.515, 0.955);

			@keyframes neonGlowBlue {
				0% {
					text-shadow: 0 0 2px rgba(255,255,255,.8),
											0 0 4px rgba(255,255,255,.8),
											0 0 4.5px  rgba(255,255,255,.8),
											0 0 8px  rgba(65,132, 220, 0.8),
											0 0 12.5px  rgba(65,132, 220,.8),
											0 0 16.5px  rgba(65,132, 220,.5),
											0 0 21px rgba(65,132, 220,.5),
											0 0 29px rgba(65,132, 220,.5),
											0 0 41.5px rgba(65,132, 220,.5);
				}
				100% {
					text-shadow: 0 0 0.5px rgba(255,255,255,.8),
											0 0 1.5px rgba(255,255,255,.8),
											0 0 2px rgba(255,255,255,.8),
											0 0 4px rgba(65,132, 220,.8),
											0 0 6px rgba(65,132, 220,.8),
											0 0 8px rgba(65,132, 220,.8),
											0 0 10.5px rgba(65,132, 220,.8),
											0 0 16.5px rgba(65,132, 220,.8);
				}
			}
		}
	}


	.text-posmod,
	.text-negmod,
	.text-keyword,
	.text-attributename,
	.text-movename,
	.text-edgename,
	.text-gmtext,
	.text-resultlabel {
		font-weight: $font-weight-bold;
	}

	.text-keyword {
		color: var(--KT-color-keyword);
	}
	.text-attributename {
		color: var(--KT-color-keyword);
	}
	.text-movename {
		color: var(--KT-color-keyword-bright);
		font-style: italic;
	}
	.text-edgename {
		color: var(--KT-color-pos);
	}
	.text-posmod,
	.text-posmod+.text-keyword,
	.text-posmod+.text-attributename {
		color: var(--KT-color-pos);
	}

	.text-negmod,
	.text-negmod+.text-keyword,
	.text-negmod+.text-attributename {
		color: var(--KT-color-neg);
	}

	.text-gmtext {
		color: var(--KT-color-neg);
	}

	.text-resultlabel {
		color: var(--KT-color-secondary);
	}

	.text-trigger {
		color: var(--KT-color-primary-brightest);
		font-weight: $font-weight-semi;
		font-style: italic;
	}

	div.hover-strip {
		--icon-size: 30px;
		--strip-height: calc(var(--icon-size) + 2px);
		--strip-padding-vert: 5px;
		--strip-underline-width: 1px;

		--strip-color-fg: var(--KT-color-primary);
		--strip-color-bg: var(--KT-color-contrast);
		--strip-font-size: #{$rem-16};
		--strip-font-weight: #{$font-weight-semi};
		--icon-color-bg: var(--KT-color-contrast);
		--icon-color-fg: var(--KT-color-primary);
		--icon-color-outline: transparent;
		--icon-clip-path: circle(closest-side);
		--icon-scale: 1;
		--button-color-bg: var(--KT-color-primary);
		--button-color-fg: var(--KT-color-contrast);
		--tooltip-color-fg: var(--KT-color-primary-brightest);
		--tooltip-color-bg: var(--KT-color-contrast);

		position: relative;
		height: var(--strip-height);
		white-space: nowrap;

		.icon-container, .icon-container .svg-container {
			position: relative;
			display: inline-block;
			--KT-svg-bg: var(--icon-color-bg);
			--KT-svg-fill: var(--icon-color-fg);
			--KT-svg-clip-path: var(--icon-clip-path);
			--KT-svg-scale: var(--icon-scale);
			height: var(--icon-size);
			width: var(--icon-size);
			// margin: var(--icon-margin);
			// border: var(--border-width) solid var(--icon-background);
			// border-radius: calc(var(--icon-size) / 2);
			// overflow: hidden;
			white-space: nowrap;
			// z-index: 1;
			font-size: 0;
			left: 0;
		}

		.icon-container {
			filter:
				drop-shadow(0 0 0.5px var(--icon-color-outline))
				drop-shadow(0 0 0.5px var(--icon-color-outline))
				drop-shadow(0 0 0.5px var(--icon-color-outline));
		}

		.button-strip {
			position: absolute;
			display: inline-flex;
			flex-direction: row;
			height: var(--icon-size);
			top: calc(0.5 * (var(--strip-height) - var(--icon-size)));
			width: calc(100% - 0.5 * var(--icon-size));
			left: calc(0.5 * var(--icon-size));
			background: var(--strip-color-bg);
			padding:
				calc(0.5 * var(--strip-padding-vert))
				0;
			outline: 0px solid var(--button-color-bg);
			justify-content: space-evenly;
			overflow: hidden;

			.button-spacer {
				display: inline-block;
				width: calc(0.5 * var(--icon-size));
				flex-grow: 0;
				flex-shrink: 0;
				position: relative;
			}

			.strip-button {
				flex-grow: 0.2;
				--KT-svg-fill: var(--button-color-fg);
				background: var(--button-color-bg);
				font-size: 0;
				flex-basis: auto;
				width: unset;
				position: relative;
				margin: 0;
				padding: 0;
				overflow: hidden;

				.svg-container {
					top: 0;
					left: 0;
				}

				.button-tooltip {
					opacity: 0;
					color: var(--button-color-fg);
					text-align: center;
					line-height: var(--icon-size);
					font-size: $rem-10;
					text-transform: uppercase;
					font-family: var(--font-primary-caps);
					transform-origin: center center;
					transform: translate(-50%, -50%) scaleX(0.75);
					position: relative;
					left: 50%;
					top: 50%;
				}
			}
		}

		.strip-name {
			position: absolute;
			width: calc(100% - var(--icon-size) - 5px);
			height: 100%;
			color: var(--strip-color-fg);
			font-size: var(--strip-font-size);
			font-weight: var(--strip-font-weight);
			line-height: var(--icon-size);
			top: 0;
			left: calc(var(--icon-size) + 5px);
			white-space: nowrap;
		}

		.strip-bg {
			position: absolute;
			display: block;
			height: calc(100% - 2 * var(--strip-padding-vert));
			width: calc(100% - 0.5 * var(--icon-size));
			top: var(--strip-padding-vert);
			left: calc(0.5 * var(--icon-size));
			background: var(--strip-color-bg);
			border-bottom: 1px solid var(--button-color-bg);
		}

		.strip-tooltip {
			pointer-events: none;
			position: absolute;
			display: block;
			font-family: var(--font-primary);
			font-size: 10px;
			line-height: $rem-12;
			text-align: center;
			font-style: italic;
			width: 100%;
			text-align: left;
			color: var(--tooltip-color-fg);
			background: var(--tooltip-color-bg);
			opacity: 0;
			bottom: 0;
			left: 0;
			z-index: 20;
			white-space: break-spaces;

			padding: 4px;
			border-radius: 20px;
		}

		&.move-strip:not(.derived-move) {
			--icon-color-bg: var(--KT-color-primary);
			--icon-color-fg: var(--KT-color-contrast);
			--icon-color-outline: var(--KT-color-primary);
		}

		&.wound-strip {
			--icon-size: 20px;
			--strip-padding-vert: 2px;
			--strip-color-bg: #{$red-darkest};
			--strip-color-fg: #{$red-glow};
			--strip-font-size: #{$rem-12};
			--icon-color-bg: var(--KT-color-contrast);
			--icon-color-fg: var(--KT-color-primary);
			--icon-clip-path: polygon(0% 50%, 50% 0%, 100% 50%, 50% 100%);
			--icon-scale: 1.3;
			--icon-color-outline: #{$red-glow};
			--button-color-bg: var(--KT-color-primary);
			--button-color-fg: var(--KT-color-contrast);
			--tooltip-color-bg: var(--KT-color-contrast);
			--tooltip-color-fg: var(--KT-color-primary-brightest);

			&.wound-critical {
				--strip-color-bg: #{$red-darker};
				--strip-color-fg: #{$white-brighter};
				--icon-color-bg: #{$red-glow};
				--icon-color-fg: #{$white-brightest};
				--icon-color-outline: #{$white-brightest};
				--button-color-bg: #{$red-glow};
				--button-color-fg: #{$black-darkest};
			}

			&.wound-stabilized {
				--icon-clip-path: circle(closest-side);
				--icon-scale: 1;
				--strip-color-bg: transparent;
				--strip-color-fg: #{$gold-dark};
				--icon-color-outline: transparent;
				.strip-name {
					font-style: italic;
				}

			}
		}
	}

	.result-entry {
		--label-width: 60px;
		--label-gap: 10px;
		--result-entry-horiz-padding: 20px;
		display: block;
		margin: 0 var(--result-entry-horiz-padding);
		font-size: $rem-16;
		clear: both;

		> label {
			text-align: right;
			display: block;
			white-space: nowrap;
			width: var(--label-width);
			height: 100%;
			float: left;
			margin-right: var(--label-gap);
		}

		> span {
			display: inline-block;
			width: calc(100% - (var(--label-width) + var(--label-gap)));
			margin-bottom: 4px;
			padding-bottom: 2px;
			border-bottom-style: solid;
			border-bottom-width: 3px;
			border-image: linear-gradient(to right, var(--KT-color-primary) 50%, transparent) 1;
			vertical-align: top;
		}

		&:last-of-type>span {
			border-bottom: none;
		}
	}
}